/**
 * "Skip Nav" link becomes visible on focus to facilitate
 * screen reader and keyboard-only users.
 */

.screen-reader-text.skip-link a:focus {
	background-color: $red;
	clip: auto;
	color: #FFFFFF;
	display: block;
	height: ce(32px, 13px);
	line-height: ce(32px, 13px);
	padding: 0 cp(12px, 320px);
	position: static;
	text-decoration: none;
}


/**
 * Navbar contains primary navigation and search field
 */

.navbar {
	@extend %clearfix;
	background-color: $red;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
	position: relative;

	/**
	 * Apply gradient to the navigation bar in medium viewports and up
	 * (in narrow viewports, the menu visibility toggle receives the
	 * gradient.)
	 */

	@include bp(medium) {
		@include background-image(linear-gradient(top, #951c1c 0, $red 100%));
	}
}


/**
 * Begin primary site navigation
 */

.primary-navigation {

	a {
		color: #FFFFFF;
		display: block;
		height: ce(32px, 13px);
		line-height: ce(32px, 13px);
		padding: 0 cp(12px, 320px);
		text-decoration: none;
		text-align: left;
	}

	/**
	 * Menu visibility toggle for narrow viewports
	 */

	.menu-toggle {
		height: ce(32px, 18px);
		line-height: ce(32px, 18px);

		@include background-image(linear-gradient(top, #951c1c 0, $red 100%));
		@include rem(font-size, 18px);

		&:after {
			content: "\f431";
			display: inline-block;
			font-family: Genericons;
			margin-left: 4px;
			vertical-align: bottom;
		}

		&.open:after {
			content: "\f432";
		}

		/**
		 * Hide the visibility toggle in medium and up viewports
		 */

		@include bp(medium) {
			display: none;
		}
	}
}

.primary-navigation-container {

	/**
	 * Hide the primary navigation by default
	 * in narrow viewports, to be revealed by the
	 * visibility toggle.
	 */

	display: none;

	/**
	 * Primary navigation is visible by default
	 * in medium viewports and up.
	 */

	@include bp(medium) {
		display: block;

		@include background-image(linear-gradient(top, #951c1c 0, $red 100%));
	}

	/**
	 * First Level Navigation
	 */

	ul {
		background-color: $red;

		li {
			border-top: 1px solid rgba(255, 255, 255, 0.1);

			@include bp(medium) {
				border-top: none;
				float: left;
				position: relative;
				white-space: nowrap;

				&:hover > ul {
					display: block;
				}

				a {
					display: block;
					padding: 0 1em;
				}
			}
		}

		a:hover,
		a:active,
		a:focus,
		li.current_page_item > a {
			background-color: rgba(255, 255, 255, 0.1);
		}

		/**
		 * Second Level Navigation
		 */

		ul.children {

			a {
				padding: 0 7.5%;

				@include bp(medium) {
					padding: 0 1em;
				}
			}

			@include bp(medium) {
				box-shadow: -2px 0 2px rgba(0, 0, 0, 0.2);
				display: none;
				position: absolute;

				li {
					float: none;

					@include bp(medium) {
						border-top: 1px solid rgba(255, 255, 255, 0.1);
					}

					a {
						display: block;
						min-width: 180px;
					}
				}

				ul {
					position: absolute;
					top: 0;
					left: 100%;
				}
			}

			ul a {
				padding: 0 11.25%;

				@include bp(medium) {
					padding: 0 1em;
				}
			}
		}
	}
}

/**
 * End primary site navigation
 */


/**
 * Begin site search
 */

.toggle-search {
	color: #FFFFFF;
	display: block;
	font-family: Genericons;
	font-size: ce(18px, 13px);
	height: ce(32px, 18px);
	line-height: ce(32px, 18px);
	overflow: hidden;
	position: absolute;
	right: 3.75%;
	text-decoration: none;
	top: 0;
	white-space: nowrap;

	&:hover, &:active, &:focus {
		color: #FFFFFF;
	}

	@include bp(large) {
		display: none;
	}
}

form[role="search"] {
	background-color: $red;
	clear: both;
	display: none;
	float: right;
	padding: 0 3.75% 0.75em 0;

	@include bp(medium) {
		background-color: transparent;
	}

	@include bp(large) {
		clear: none;
		display: block;
		margin-right: 10px;
		padding: 0;

		@include rem(margin-top, 5px);
	}

	label {
		display: block;
		float: left;

		.screen-reader-text {
			display: block;
			height: 0;
			overflow: hidden;
			text-indent: 102%;
			white-space: nowrap;
			width: 0;
		}
	}

	input {
		border: none;

		&[type="search"] {
			border-radius: 100em;
			box-shadow: 2px 2px 10px -2px rgba(0, 0, 0, 0.4) inset;
			margin-right: 1em;
			padding: 4px 8px;
		}

		&[type="submit"] {
			background-color: #dfdfdf;
			border: 1px solid $gray;
			border-radius: 100em;
			box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5),
				inset 0 -2px 3px rgba(0, 0, 0, 0.1);
			cursor: pointer;
			float: left;
			padding: 2px 8px;

			@include transition(all 0.2s ease-out);

			&:hover, &:active, &:focus {
				background-color: $gray;
			}
		}
	}
}

/**
 * End Site Search
 */
